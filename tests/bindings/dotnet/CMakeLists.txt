# Build dotnet tests
set(DOTNET_TEST_TARGET TestDotNet)
set(DOTNET_TEST_SRC
	"TestDotnet.cs"
)

message(STATUS "Configuring ${DOTNET_TEST_TARGET}")

add_executable(${DOTNET_TEST_TARGET} ${DOTNET_TEST_SRC})
set_target_properties(${DOTNET_TEST_TARGET} PROPERTIES VS_DOTNET_REFERENCE_System ON) 
add_dependencies(${DOTNET_TEST_TARGET} ${DOTNET_TARGET} ${SERVER_TARGET})
target_link_libraries(${DOTNET_TEST_TARGET} ${DOTNET_TARGET})

add_test(NAME ${DOTNET_TEST_TARGET} COMMAND ${DOTNET_TEST_TARGET} WORKING_DIRECTORY $<TARGET_FILE_DIR:${DOTNET_TEST_TARGET}>)
