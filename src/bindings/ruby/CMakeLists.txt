set(BUILD_STAMP "${CMAKE_CURRENT_BINARY_DIR}/build/timestamp")

set(RUBY_INTERFACES
    showtime.i
)

include_directories(
    ${RUBY_HDR_DIR}
    ${RUBY_ARCHHDR_DIR}
)

set(SHOWTIME_RUBY_TARGET showtime_ruby)

SET_SOURCE_FILES_PROPERTIES(${RUBY_INTERFACES} PROPERTIES CPLUSPLUS ON)

include (${SWIG_USE_FILE})
set(CMAKE_SWIG_OUTDIR ${CMAKE_CURRENT_BINARY_DIR})

SWIG_ADD_LIBRARY(${SHOWTIME_RUBY_TARGET} LANGUAGE ruby TYPE SHARED SOURCES ${RUBY_INTERFACES} ${ZST_HEADERS})

add_dependencies(${SWIG_MODULE_${SHOWTIME_RUBY_TARGET}_REAL_NAME} ${PROJECT_NAME})

SWIG_LINK_LIBRARIES(${SHOWTIME_RUBY_TARGET} 
	${PROJECT_NAME}
	${ZeroMQ_LIBRARIES} 
	${CZMQ_LIBRARIES}
	${MSGPACK_LIBRARIES}
	${RUBY_LIBRARY}
)
